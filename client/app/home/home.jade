include ../template/_mixins

.jumbotron

	h3.h--larger Find your Game.

	//- SEARCH
	//-------------------------------------------------------------------------
	.collapse--search

		div(collapse="searchResult")
			.spacer &nbsp;
		.panel(collapse="!searchResult")
			.container
				.row.fade2-animation(ng-show="games.length > 0")
					.clear
						+icon('times')(ng-click="q = ''").a
					.paginator(ng-show="pagination.count > 12")
						span(ng-show="pagination.links.first", ng-click="paginate(pagination.links.first)"): +icon('angle-left-skip').shift-up.smaller.a.a--lighter
						span.space-left(ng-show="pagination.links.prev", ng-click="paginate(pagination.links.prev)"): +icon('angle-left').shift-up.smaller.a.a--lighter
						span.small.space-left PAGE &nbsp; {{ pagination.page }} / {{ Math.ceil(pagination.count / pagination.size) }}
						span.space-left(ng-show="pagination.links.next", ng-click="paginate(pagination.links.next)"): +icon('angle-right').shift-up.smaller.a.a--lighter
						span.space-left(ng-show="pagination.links.last", ng-click="paginate(pagination.links.last)"): +icon('angle-right-skip').shift-up.smaller.a.a--lighter

					.col-md-3.col-sm-4.col-xs-6(ng-repeat="game in games", ng-click="navGame(game.id)")
						.panel.panel--animated.ng-cloak
							.img.img--ar-bg.img--rounded-top(img-bg="game.media.backglass.variations.small.url")
							.text-center.padder-horizontal
								h1.h--small {{ game.title }}
								label.label--subtitle {{ game.manufacturer }} &middot; {{ game.year }}

				p.padder-bottom-2x(ng-show="!games.length && !searching"): i No games found containing "{{ q }}".
				p.padder-bottom-2x(ng-show="!games.length && searching"): i Searching...

		.searchbox.abs-center
			form.form-inline
				input.form-control.input--lighter(type="text", ng-model="q", focus-on)
				+icon('search').space-left

	//- INFO
	//-------------------------------------------------------------------------
	.collapse--info
		div(collapse="whatsThis")
			.spacer &nbsp;
		.panel(collapse="!whatsThis")

			.clear
				+icon('times')(ng-click="whatsThis = false").a

			h3.h--large.h--primary What's this?
			p.center-block
				| Welcome to VPDB, the Visual Pinball Database. VPDB is a platform where people can share their digital
				| recreations of virtual pinball tables that were created with the excellent Visual Pinball simulation software.

			.row.padder-top-3x
				.col-sm-4.text-center
					p: +icon('github-alt').svg-3x
					p VPDB is <a href="https://github.com/freezy/node-vpdb" class="a--primary">open source</a>. It can be deployed and improved by anyone interested.
						hr.hr--light.visible-xs-block
				.col-sm-4.text-center
					p: +icon('database').svg-3x
					p VPDB is <a href="https://developer.vpdb.ch/api/v1/releases" class="a--primary">structured</a>. It uses its own database that is designed for exactly that purpose.
						hr.hr--light.visible-xs-block
				.col-sm-4.text-center
					p: +icon('flash').svg-3x
					p VPDB is <a href="https://developer.vpdb.ch/code/performance" class="a--primary">fast</a>. Various programming techniques ensure a fluid and pleasing experience.

			p.padder-top-2x

		.abs-center
			a.a--lighter(ng-click="whatsThis = !whatsThis")
				+icon('{{ searching ? "circle-o-notch" : "vpdb-o" }}')(ng-class="{ 'svg-spin': searching }").svg-3x

.row
	//- RELEASES
	//-------------------------------------------------------------------------
	.col-sm-12
		h1.h--primary Latest Releases
		hr
		.row.fade2-animation
			.col-lg-4.col-md-6(ng-repeat="release in releases", ng-click="navGame(release.game.id)")
				.panel.panel--animated.ng-cloak
					.clearfix
					.col--list-mini-left
						.img.img--ar-square.img--rounded-left(img-bg="release.latest_version.thumb.image.url")
					.col--list-mini-right
						h1.h--small.h--no-margin {{ release.game.title }}
						label.label--block  {{ release.name }}
						span.small.pull-left by {{ release.authors[0].user.name }}
						span.small.pull-right.space-right(am-time-ago="release.created_at")
					.clearfix
		.clearfix
		p(ng-show="releases.length === 0") No releases in database yet.

	//- GAMES
	//-------------------------------------------------------------------------
	.col-sm-12
		h1.h--primary Popular Games
		hr
		p There will be something here at some point.



p.padder-top
