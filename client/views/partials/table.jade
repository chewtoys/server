.row.ng-cloak.row-fullheight(ng-controller="TableController")
	.col-sm-9.col-main
		h1 {{ table.name }}
		h3.pull-right {{table.manufacturer}} &middot; {{table.year}}
		hr
		h3 Releases
		div(ng-repeat="release in table.releases")
			.panel.panel-dark.panel-dark-detailed
				.sidebar-wrapper
					a.image-link(href="{{release.thumbs.playfield}}")
						.img-wrapper
							.img(style="background-image:url('{{release.thumbs.playfield}}')")
					p legend
				.data-wrapper
					h1 {{release.title}}
					label
						i.icon.icon-user
						span {{release.submitter.user}}
					label
						i.fa.fa-arrow-circle-up
						time-ago(from-time="{{release.lastversion.timestamp}}")
					label
						i.fa.fa-arrow-circle-down
						span {{release.lastversion.downloads}} downloads

					accordion.accordion-glued(close-others="true")
						accordion-group(heading="Description", is-open="true")
							div.markdown(markdown="release.description")

						accordion-group(heading="Authors")
							div.thumbnail.thumbnail-avatar.pull-left(ng-repeat="author in release.authors")
								div.media-avatar-medium(ng-hide="author.author.avatar", src="{{author.author.avatar}}")
								img.media-avatar-medium(ng-show="author.author.avatar", src="{{author.author.avatar}}")
								.caption
									h1 {{author.author.user}}
									label {{author.roles.join(', ')}}

						accordion-group(heading="Acknowledgements")
							div.markdown(markdown="release.acknowledgements")

						accordion-group(heading="Gallery")
							p here is the gallery
				.clearfix

			.panel.panel-dark(ng-controller="CommentsCtrl")
				h3 Comments on Release
				.media(ng-repeat="comment in release.comments" ng-controller="CommentCtrl")
					div.media-object.media-avatar-medium.pull-left(ng-hide="comment.author.avatar", src="{{comment.author.avatar}}")
					img.media-object.media-avatar-medium.pull-left(ng-show="comment.author.avatar", src="{{comment.author.avatar}}")
					.media-body
						.panel.panel-light
							.panel-triangle
							.panel-header
								label
								strong {{ comment.author.user }}
								| &nbsp;commented
								time-ago(from-time="{{comment.timestamp}}")
								.pull-right
									i.fa.fa-pencil(ng-click="editComment()")
									i.fa.fa-times-circle(ng-click="deleteComment()")

							.panel-content
								div.markdown(ng-hide="editing", markdown="comment.message")
								textarea.msd-elastic(ng-show="editing", placeholder="Update comment", ng-model="updatedComment")
							.panel-footer(ng-show="editing")
								button.btn.btn-default.pull-left(ng-click="cancelEdit()") Cancel
								button.btn.btn-default.pull-right(ng-click="saveComment()") Update Comment
								.clearfix

				.media
					div.media-avatar-medium.pull-left
					.media-body
						tabset.tabset-newcomment
							label.label-small.pull-right Comments are parsed with <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a>.
							tab
								tab-heading
									i.fa.fa-edit(title="Write")
									.panel-triangle
								textarea.msd-elastic(placeholder="Leave a comment", ng-model="$parent.newComment")
							tab
								tab-heading
									i.fa.fa-eye(title="Preview")
								div.markdown(markdown="$parent.newComment")
								label.label-message(ng-show="!newComment || newComment.length == 0") Nothing to preview.

				button.btn.btn-default.btn-comment.pull-right(ng-click="addComment()") Comment
				.clearfix


	.col-sm-3.col-menu
		h2 filter
		hr