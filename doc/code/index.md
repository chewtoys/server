---
title: Code
template: page.jade
menuIndex: 1
subsectionIndex: 1
---

# Overview

VPDB consists of three different tiers: the **API**, the **storage engine** and the **web application** that is running in 
your browser.
 

## The API

The API is VPDB's interface to its application logic. It is a RESTful HTTP service that can be accessed by any type of
client that can talk JSON over HTTP. There's a whole section about it [here][api].


## The Storage Engine

The storage engine handles everything file-related, such as:

 - File uploads
 - Post-processing
 - Downloads
 - Quota management
 
Check out the [storage section][storage], which contains information how the interface works and how the code is 
organized.
 
## The Web Application
 
This is the site you see at [https://vpdb.ch/][vpdb]. Markup, styles and assets are all served statically, while dynamic 
data is obtained from the API. We use [AngularJS][angular] as our web application framework and styles based on 
[Twitter Bootstrap][bootstrap] (with lots of custom styles). You can check out the documentation of the web application 
[here][webapp].


# Server Code

Both the API and the storage code live in the `./server` sub folder. We won't get into much detail here, but briefly the
structure is the following:

 - The application script is `./app.js`, at the root of the project.
 - Files sitting at `./server` bootstrap the application and they are only executed once at startup.
 - The `models` sub folder contains the [Mongoose][mongoose] schemas.
 - API logic sits at `controllers/api`.
 - Generic application logic sits at `modules`.
 

# Client Code

While the API and the storage engine are both part of the server component, the client code lives in a different sub 
folder called `./client`. The structure is as follows:

 - Application logic can be found in the `app` folder. The application code is separated *by feature* and you'll find
   Javascript code as well as the [Jade][jade] templates.
 - Everything in `static` gets just copied over to the site root directory.
 - The `styles` folder contains the [Stylus][stylus] files. It gets also minified in production, along with the styles
   from the vendor libraries.


## Other Folders

 - `data` contains useful assets for tests and other things.
 - `deploy` contains scripts and config files for a production setup (see [INSTALL][INSTALL]).
 - `doc` is what you're reading now.
 - `test` contains the automated tests.
 
There are also a few generated folders:

 - `bower_components` contains the client-side libraries downloaded by [Bower][bower].
 - `node_modules` contains the server-side libraries downloaded by [NPM][npm].
 - `build` is the web application root generated by `grunt build`.
 - `devsite` contains the generated developer site you're browsing now.


[api]: /api
[storage]: /code/storage
[webapp]: /code/webapp
[vpdb]: https://vpdb.ch/
[angular]: https://angularjs.org/
[bootstrap]: http://getbootstrap.com/
[mongoose]: http://mongoosejs.com/
[stylus]: http://learnboost.github.io/stylus/
[jade]: http://jade-lang.com/
[bower]: http://bower.io/
[npm]: https://www.npmjs.org/
[INSTALL]: https://github.com/freezy/node-vpdb/blob/master/INSTALL.md
